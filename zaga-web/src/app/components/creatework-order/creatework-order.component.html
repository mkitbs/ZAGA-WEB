<div class="container mt-4">
    <div class="col-12 mb-3">
        <h3>Informacije o nalogu</h3>
    </div>
    <!--header info-->
    <div class="header-info">
        <table class="table header-table">
            <tr>
                <td class="left-col-header">
                   <i class="fa fa-file mr-2"></i>Nalog:
                </td>
                <td class="right-col-header">
                    {{ workOrder.name }}
                </td>
                <td class="left-col-header">
                    <i class="fa fa-tasks mr-2"></i>Status:
                 </td>
                 <td class="right-col-header">
                    {{ workOrder.status }}
                 </td>
            </tr>
            <tr>
                <td class="left-col-header">
                    <i class="fa fa-calendar mr-2"></i>Datum:
                </td>
                <td class="right-col-header">
                    {{ workOrder.start }} - {{ workOrder.end }}
                </td>
                <td class="left-col-header">
                    <i class="fa fa-user mr-2"></i>Odgovorna osoba:
                 </td>
                 <td class="right-col-header">
                    {{ workOrder.responsible }}
                 </td>
            </tr>
            <tr>
                <td class="left-col-header">
                  <i class="fa fa-cubes "></i> Kultura:
                </td>
                <td class="right-col-header">
                    {{ workOrder.culture }}
                </td>
                <td class="left-col-header">
                    <i class="fa fa-database mr-2"></i>Kategorija:
                 </td>
                 <td class="right-col-header">
                    {{ workOrder.category }}
                 </td>
            </tr>
        </table>
    </div>

    <!--workers-->
    <div class="workers">
    <button class="btn btn-primary collapsing-button shadow-none" (click)="expandWorkers()" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
        <i class="fa fa-user mr-2"></i>Radnici<i *ngIf="!workers" class="fa fa-arrow-down mr-2 mt-1 arrows"></i><i *ngIf="workers" class="fa fa-arrow-up mr-2 mt-1 arrows"></i>
    </button>
    <div class="collapse" id="collapseExample">
    <div class="card card-body collapse-card">
        <table class="table table-input">
            <thead>
                <th>
                    Radnik*
                </th>
                <th>
                    Datum*
                </th>
                <th>
                    Radni sati*
                </th>
                <th>
                    Obradjeno*
                </th>
                <th>
                    Dodaj
                </th>
            </thead>
            <tbody>
            <tr>
                <td>
                    <div class="form-group">
                        <select [(ngModel)]="worker.worker" name="" id="" class="form-control">
                            <option value="-1"></option>
                            <option value="Milan Milanovic">Milan Milanovic</option>
                            <option value="Milos Milosevic">Milos Milosevic</option>
                            <option value="Milan Milankovic">Milan Milankovic</option>
                            <option value="Nemanja Nemanjic">Nemanja Nemanjic</option>
                            <option value="Pera Peric">Pera Peric</option>
                            <option value="Nikola Nikolic">Nikola Nikolic</option>
                        </select>
                    </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input [(ngModel)]="worker.date" (click)="od.toggle()" class="form-control" id="od" placeholder="yyyy-mm-dd" ngbDatepicker #od="ngbDatepicker">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary calendar" (click)="od.toggle()" type="button"></button>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input [(ngModel)]="worker.workPeriod" type="number" name="" class="form-control" id="">
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input [(ngModel)]="worker.treatedArea" type="text" name="" class="form-control" id="">
                        </div>
                    </td>
                    <td>
                        <div *ngIf="!editing" class="form-group">
                            <button class="btn btn-primary btn-add mr-2" (click)="addWorker()">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                        <div *ngIf="editing" class="form-group">
                            <button class="btn btn-primary btn-add mr-2" (click)="editExistingWorker()">
                                <i class="fa fa-check"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr *ngFor="let worker of workOrder.workers">
                    <td>{{ worker.worker }}</td>
                    <td>{{ worker.date }}</td>
                    <td>{{ worker.workPeriod }} h</td>
                    <td>{{ worker.treatedArea }} ha</td>
                    <td>
                        <button class="btn btn-primary btn-edit" (click)="editWorker(worker)">
                        <i class="fa fa-edit"></i>
                        </button>
                    </td>
                </tr>
                </tbody>
        </table>
    </div>  
</div>

<!--machines-->
<div class="machines mt-4">
    <button class="btn btn-primary collapsing-button shadow-none" (click)="expandMachines()" type="button" data-toggle="collapse" data-target="#collapseExampleMachines" aria-expanded="false" aria-controls="collapseExampleMachines">
        <i class="fa fa-truck mr-2"></i>Mašine<i *ngIf="!machines" class="fa fa-arrow-down mr-2 mt-1 arrows"></i><i *ngIf="machines" class="fa fa-arrow-up mr-2 mt-1 arrows"></i>
    </button>
    <div class="collapse" id="collapseExampleMachines">
    <div class="card card-body collapse-card">
        <table class="table table-input">
            <thead>
                <th>
                    Mašina*     
                </th>
                <th>
                    Radnik*
                </th>
                <th>
                    Datum*
                </th>
                <th>
                    Radni sati*
                </th>
                <th>
                    Gorivo
                </th>
                <th>
                    Tip goriva
                </th>
                <th>
                    Magacin
                </th>
                <th>
                    Dodaj
                </th>
            </thead>
            <tbody>
            <tr>
                <td>
                        <div class="form-group">

                            <select [(ngModel)]="machine.machine" name="" id="" class="form-control">
                                <option value="-1"></option>
                                <option value="NH 456/1">NH 456/1</option>
                                <option value="TEST MAŠINA 1">TEST MAŠINA 1</option>
                                <option value="TEST MAŠINA 2">TEST MAŠINA 2</option>
                                <option value="TEST MAŠINA 3">TEST MAŠINA 3</option>
                                <option value="Traktor">Traktor</option>
                                <option value="Bager">Bager</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">

                            <select [(ngModel)]="machine.worker" name="" id="" class="form-control">
                                <option value="-1"></option>
                                <option value="Milan Milanovic">Milan Milanovic</option>
                                <option value="Milos Milosevic">Milos Milosevic</option>
                                <option value="Milan Milankovic">Milan Milankovic</option>
                                <option value="Nemanja Nemanjic">Nemanja Nemanjic</option>
                                <option value="Pera Peric">Pera Peric</option>
                                <option value="Nikola Nikolic">Nikola Nikolic</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <input [(ngModel)]="machine.date" (click)="od.toggle()" class="form-control" id="od" placeholder="yyyy-mm-dd" ngbDatepicker #od="ngbDatepicker">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary calendar" (click)="od.toggle()" type="button"></button>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input [(ngModel)]="machine.workPeriod" type="number" name="" class="form-control" id="">
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <input [(ngModel)]="machine.fuel" type="number" name="" id="" class="form-control">
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <select [(ngModel)]="machine.fuelType" name="" id="" class="form-control">
                                <option value="-1"></option>
                                <option value="GORIVO 1">GORIVO 1</option>
                                <option value="GORIVO 2">GORIVO 2</option>
                                <option value="GORIVO 3">GORIVO 3</option>
                                <option value="disel">DISEL</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <select [(ngModel)]="machine.storage" name="" class="form-control" id="">
                                <option value="-1"></option>
                                <option value="Magacin 1">MAGACIN 1</option>
                                <option value="Magacin 2">MAGACIN 2</option>
                                <option value="Magacin 3">MAGACIN 3</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div *ngIf="!editingMachine" class="form-group">
                            <button class="btn btn-primary btn-add mr-2" (click)="addMachine()">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                        <div *ngIf="editingMachine" class="form-group">
                            <button class="btn btn-primary btn-add mr-2" (click)="updateExistingMachine()">
                                <i class="fa fa-check"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr *ngFor="let machine of workOrder.machines">
                    <td>{{ machine.machine }}</td>
                    <td>{{ machine.worker }}</td>
                    <td>{{ machine.date }}</td>
                    <td>{{ machine.workPeriod}} h</td>
                    <td>{{ machine.fuel }}</td>
                    <td>{{ machine.fuelType }}</td>
                    <td>{{ machine.storage }}</td>
                    <td>
                        <button class="btn btn-primary btn-edit" (click)="editMachine(machine)">
                        <i class="fa fa-edit"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
      
    </div>  
    </div>
</div>

<!--materials-->
<div class="machines mt-4">
    <button class="btn btn-primary collapsing-button shadow-none" (click)="expandMaterials()" type="button" data-toggle="collapse" data-target="#collapseExampleMaterials" aria-expanded="false" aria-controls="collapseExampleMachines">
        <i class="fa fa-leaf mr-2"></i>Materijali<i *ngIf="!materials" class="fa fa-arrow-down mr-2 mt-1 arrows"></i><i *ngIf="materials" class="fa fa-arrow-up mr-2 mt-1 arrows"></i>
    </button>
    <div class="collapse" id="collapseExampleMaterials">
    <div class="card card-body collapse-card">
        <table class="table table-input">
            <thead>
                <th>
                    Materijal*     
                </th>
                <th>
                    Količina*
                </th>
                <th>
                    Jedinica mere*
                </th>
            </thead>
            <tbody>
            <tr>
                <td>
                        <div class="form-group">

                            <select [(ngModel)]="material.name" name="" id="" class="form-control">
                                <option value="-1"></option>
                                <option value="MAT1">Materijal 1</option>
                                <option value="MAT1">Materijal 2</option>
                                <option value="MAT1">Materijal 3</option>
                                <option value="XYZ">XYZ</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">

                            <input [(ngModel)]="material.quantity" type="number" name="" id="" class="form-control">
                        </div>
                    </td>
                    <td>
                        <div class="form-group">

                            <select [(ngModel)]="material.unit" name="" id="" class="form-control">
                                <option value="KG">kg</option>
                                <option value="KG/H">kg/h</option>
                                <option value="l">l</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div *ngIf="!editingMaterial" class="form-group">
                            <button class="btn btn-primary btn-add mr-2" (click)="addMaterial()">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                        <div *ngIf="editingMaterial" class="form-group">
                            <button class="btn btn-primary btn-add mr-2" (click)="editExistingMaterial()">
                                <i class="fa fa-check"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                <tr *ngFor="let material of workOrder.materials">
                    <td>{{ material.name }}</td>
                    <td>{{ material.quantity }}</td>
                    <td>{{ material.unit }}</td>
                    <td>
                        <button class="btn btn-primary btn-edit" (click)="editMaterial(material)">
                        <i class="fa fa-edit"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
      
    </div>  
    </div>
    </div>

</div>

</div>