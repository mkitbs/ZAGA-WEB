<navbar></navbar>
<div class="container" style="margin-top: 50px;">
  <br><br>
  <!--
  <div style="width: inherit; background-color: #ffc803; text-align: center;font-size: 15px;color:white">
    <span>Ovo je statička stranica, ne pokazuje realne podatke, osim vremenske prognoze!</span> 
  </div>
  <br>
   -->
   <div class="container mt-4 d-none d-md-block">
    <div class="row">
      <div class="col">
        <div class="card card-home mb-3" style="height: 8.5rem; cursor: pointer;" (click)="showWorkOrders()">
          <div class="card-body">
            <div class="row">
              <div
                class="col-md-auto"
                style="width: fit-content; "
              >
                <img
                  class="card-img-right"
                  src="../../../assets/files.png"
                  style="width: auto; height: 70px;"
                />
              </div>
              <div class="col">
                <div class="card-text">
                  <h5 class="card-title">
                    Pregled radnih naloga
                  </h5>
                  <p>Izvršite pregled svojih ili svih radnih naloga</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card card-home mb-3" style="height: 8.5rem; cursor: pointer;" (click)="createWorkOrder()">
          <div class="card-body">
            <div class="row">
              <div
                class="col-md-auto"
                style="width: fit-content; "
              >
                <img
                  class="card-img-right"
                  src="../../../assets/add.png"
                  style="width: auto; height: 70px;"
                />
              </div>
              <div class="col">
                <div class="card-text">
                  <h5 class="card-title">
                  Kreiranje radnog naloga
                  </h5>
                  <p>Započnite kreiranje radnog naloga</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> 
  </div>
  <div class="container d-md-none">
    <div class="col">
      <div class="card card-home mb-3" style="height: 8.5rem; cursor: pointer;" (click)="showWorkOrders()">
        <div class="card-body">
          <div class="row">
            <div
              class="col-md-auto"
              style="width: fit-content; "
            >
              <img
                class="card-img-right"
                src="../../../assets/files.png"
                style="width: auto; height: 70px;"
              />
            </div>
            <div class="col">
              <div class="card-text">
                <h5 class="card-title">
                  Pregled radnih naloga
                </h5>
                <p>Izvršite pregled svojih ili svih radnih naloga</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card card-home mb-3" style="height: 8.5rem; cursor: pointer;" (click)="createWorkOrder()">
        <div class="card-body">
          <div class="row">
            <div
              class="col-md-auto"
              style="width: fit-content; "
            >
              <img
                class="card-img-right"
                src="../../../assets/add.png"
                style="width: auto; height: 70px;"
              />
            </div>
            <div class="col">
              <div class="card-text">
                <h5 class="card-title">
                Kreiranje radnog naloga
                </h5>
                <p>Započnite kreiranje radnog naloga</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
  <a class="weatherwidget-io" href="https://forecast7.com/sr/45d2719d83/novi-sad/" data-label_1="NOVI SAD"
    data-label_2="Vremenska prognoza"  data-icons="Climacons Animated" data-theme="original" data-suncolor="#f68901">Vidi vremensku prognozu</a>
  <br><br>
  <div class="row">
    <div class="col">
      <div style="display: block;">
        <h3 style="text-align: center;">Agro-tehinčke mere danas</h3>
        <br>
        <canvas baseChart *ngIf="chartOpTodayReady && !chartOpTodayEmpty" [datasets]="barChartData" [labels]="barChartLabels" [chartType]="barChartType"
          [legend]="barChartLegend" [options]="barChartOptions">
        </canvas>
        <div *ngIf="chartOpTodayEmpty">
          <img src="../../../assets/line-chart.png" class="center" />
          <h5 style="text-align: center;" class="center">Nema podataka za prikazivanje</h5>
        </div>
      </div>
    </div>
    <div class="col">
      <div style="display: block">
        <h3 style="text-align: center;">Broj zaposlenih po ATM (danas)</h3>
        <br>
        <canvas *ngIf="chartEmployeePerOpReady && !chartEmployeePerOpEmpty" baseChart [datasets]="barChartWorkerNoData" [labels]="barChartWorkerNoLabels"
          [chartType]="barChartWorkerNoType" [legend]="barChartWorkerNoLegend" [options]="barChartWorkerNoOptions">
        </canvas>
        <div *ngIf="chartEmployeePerOpEmpty">
          <img src="../../../assets/line-chart.png" class="center" />
          <h5 style="text-align: center;" class="center">Nema podataka za prikazivanje</h5>
        </div>
      </div>
    </div>
  </div>
  <br><br>
  <div class="row">
    <div class="col">
      <div style="display: block;">
        <h3 style="text-align: center;">Površine (ha) po kulturama</h3>
        <br>
        <canvas *ngIf="chartAreasByCropsReady && !chartAreasByCropsEmpty" baseChart [datasets]="barChartAreaPerCultureData" [labels]="barChartAreaPerCultureLabels"
          [chartType]="barChartAreaPerCultureType" [colors]="chartColors" [options]="barChartAreaPerCultureOptions">
        </canvas>
        <div *ngIf="chartAreasByCropsEmpty">
          <img src="../../../assets/line-chart.png" class="center" />
          <h5 style="text-align: center;" class="center">Nema podataka za prikazivanje</h5>
        </div>
      </div>
    </div>
    <div class="col">
      <div style="display: block;">
        <h3 style="text-align: center;">Prinos po kulturama t/ha</h3>
        <h5 style="text-align: center; font-style: italic;"><span style="color: red;">*</span>Uzorak! Ne pokazuje realne podatke.</h5>
        <br>
        <canvas baseChart [datasets]="barChartYieldPerCultureData" [labels]="barChartYieldPerCultureLabels"
          [chartType]="barChartYieldPerCultureType" [legend]="barChartYieldPerCultureLegend"
          [options]="barChartYieldPerCultureOptions">
        </canvas>
      </div>
    </div>
  </div>
  <br><br>
  <div class="row">
    <div class="col">
      <h3 style="text-align: center;">Na terenu</h3>
      <h5 style="text-align: center; font-style: italic;"><span style="color: red;">*</span>Uzorak! Ne pokazuje realne podatke.</h5>
      <br>
      <table class="table">
        <thead>
          <th scope="col"><i class="fa fa-user mr-2"></i>Radnici</th>
          <th scope="col"><i class="fa fa-truck mr-2"></i> Mašine</th>
          <th scope="col"><i class="fa fa-database mr-2"></i> Table</th>
        </thead>
        <tbody>
          <tr *ngFor="let worker of markers; let i = index" id="{{worker.id}}">
            <td>
              <i class="fa fa-exclamation" style="color: red; float: left;"
                *ngIf="worker.latWorker !== worker.latMachine && worker.lngWorker !== worker.lngMachine && worker.machine != ''"
                title="Radnik i mašina nisu na istoj lokaciji!"></i>
              <span (click)="clickedMarker(1*worker.latWorker, 1*worker.lngWorker, worker.id, i)"
                style="cursor: pointer;" title="Vidi radnika na mapi">{{worker.worker}}</span>
            </td>
            <td *ngIf="worker.machine != ''; else elseBlock">
              <span (click)="clickedMarker(1*worker.latMachine, 1*worker.lngMachine, worker.id, i)"
                style="cursor: pointer;" title="Vidi mašinu na mapi">{{worker.machine}}</span>
            </td>
            <ng-template #elseBlock>
              <td></td>
            </ng-template>
            <td>
              <span (click)="onTableClick(1*worker.lat1Table, 1*worker.lng1Table, 1*worker.lat2Table, 1*worker.lng2Table, 
                            1*worker.lat3Table, 1*worker.lng3Table, 1*worker.lat4Table, 1*worker.lng4Table, worker.id)"
                style="cursor: pointer;" title="Vidi tablu na mapi">{{worker.table}}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-sm-12">
      <br><br><br>
      <agm-map [latitude]="lat" [longitude]="lng" (mapReady)="onMapReady($event)" [mapTypeControl]="true"
        disableDoubleClickZoom="true" mapTypeId='satellite' [zoom]=15 (mapClick)="onChoseLocation($event)">
        <agm-marker *ngFor="let worker of markers; let i = index"
          (markerClick)="clickedMarker(1*worker.latWorker, 1*worker.lngWorker, worker.id, i)"
          [latitude]="worker.latWorker" [longitude]="worker.lngWorker" [id]="i" [animation]="worker.animation"
          [iconUrl]="{
                        url: './assets/worker.svg',
                        scaledSize: {
                            width: 40,
                            height: 60
                        }
                    }">
        </agm-marker>
        <agm-marker *ngFor="let machine of markers; let i = index"
          (markerClick)="clickedMarker(1*machine.latMachine, 1*machine.lngMachine, machine.id, i)"
          [latitude]="machine.latMachine" [longitude]="machine.lngMachine" [id]="machine.id" [iconUrl]="{
                        url: './assets/tractor.png',
                        scaledSize: {
                            width: 40,
                            height: 60
                        }
                    }" [animation]="machine.animation">
        </agm-marker>
        <agm-polygon [paths]="paths" [clickable]="false" [fillColor]="'#5C7495'">
        </agm-polygon>
      </agm-map>
    </div>
  </div>
  <br>
  <ngx-spinner></ngx-spinner>
</div>